"use strict";!function(){function e(){(o=!o)?(a.style.display="block",document.body.style.overflowY="hidden",n.forEach(function(e){"btn-menu__img btn-menu__img--activ"==e.className?e.className="btn-menu__img":e.className="btn-menu__img btn-menu__img--activ"})):(a.style.display="none",document.body.style.overflowY="visible",n.forEach(function(e){"btn-menu__img btn-menu__img--activ"==e.className?e.className="btn-menu__img":e.className="btn-menu__img btn-menu__img--activ"}))}var t=document.querySelector(".btn-menu"),a=document.querySelector(".header__menu"),n=document.querySelectorAll(".btn-menu__img"),o=!1;a.addEventListener("click",function(){e()}),t.addEventListener("click",function(){e()});$(".users__item").click(function(e){e.preventDefault();var a,t=$(e.currentTarget),n=t.attr("data-user"),o=(a=n,$(".rewievs__item").filter(function(e,t){return $(t).attr("data-review")===a})),s=t.closest(".users__item");o.addClass("rewievs__item--activ").siblings().removeClass("rewievs__item--activ"),s.addClass("users__item--activ").siblings().removeClass("users__item--activ")});function r(e){var t=e.find(".member__body"),a=e.find(".team__item"),n=e.find(".member__btn");a.removeClass("team__item--active"),n.removeClass("member__btn--active"),t.height(0)}$(".member__btn").click(function(e){var t,a,n,o=$(e.currentTarget),s=o.closest(".team__list");o.closest(".team__item").hasClass("team__item--active")?r(s):(r(s),t=o.closest(".team__item"),a=t.find(".member__body"),n=a.find(".member__body-block").height(),t.addClass("team__item--active"),a.height(n),o.addClass("member__btn--active"))});var s=$(".slider__list").bxSlider({pager:!1,controls:!1});$(".slider__left").click(function(e){s.goToPrevSlide()}),$(".slider__right").click(function(e){s.goToNextSlide()});var i;$(".form__wrapper").find("[name='tel']").keydown(function(e){var t=!1,a=!1,n=!1;0<=e.key&&e.key<=9&&(t=!0),"-"==e.key&&(a=!0),"ArrowLeft"!=e.key&&"ArrowRight"!=e.key&&"Backspace"!=e.key&&"Delete"!=e.key||(n=!0),t||a||n||e.preventDefault()}),$(".form__wrapper").submit(function(e){e.preventDefault();var t,a,n=$(e.currentTarget),o=n.find("[name='name']"),s=n.find("[name='tel']"),r=n.find("[name='comment']"),i=n.find("[name='to']"),c=$("#modal"),l=c.find(".modal__contant");c.removeClass("error-modal"),(t=n,[o,s,r,i].forEach(function(e){e.removeClass("input-error"),""===e.val().trim()&&e.addClass("input-error")}),0===t.find(".input-error").length)&&((a=$.ajax({url:"https://webdev-api.loftschool.com/sendmail",method:"post",data:{name:o.val(),phone:s.val(),comment:r.val(),to:i.val()}})).done(function(e){l.text(e.message)}),a.fail(function(e){var t=e.responseJSON.message;l.text(t),c.addClass("error-modal")}),a.always(function(e){$.fancybox.open({href:"#modal",type:"inline"})}))}),$(".modal__btn").click(function(e){$.fancybox.close()});ymaps.ready(function(){i=new ymaps.Map("map",{center:[55.750626,37.599642],zoom:14,controls:[]});for(var e=[[55.758594,37.582604],[55.741068,37.581126],[55.749142,37.602781],[55.755991,37.622498]],t=new ymaps.GeoObjectCollection({},{draggable:!1,iconLayout:"default#image",iconImageHref:"./img/icons/map.svg",iconImageSize:[46,57],iconImageOffset:[-35,-52]}),a=0;a<e.length;a++)t.add(new ymaps.Placemark(e[a]));i.geoObjects.add(t),i.behaviors.disable("scrollZoom")});var c=$("section"),l=$(".maincontent"),d=$(".radio-menu").find(".radio-menu__item"),m=!1;c.first().addClass("active");function u(e,t,a){e.eq(t).addClass(a).siblings().removeClass(a)}function v(e){var t,a;m||(m=!0,a=-100*e,t=isNaN(a)?(console.error("переданно не верное значение в countSectionPosition"),0):a,l.css({transform:"translateY(".concat(t,"%)")}),u(c,e,"active"),u(d,e,"radio-menu__item--activ"),setTimeout(function(){m=!1},700))}function f(){var e=c.filter(".active"),t=e.next(),a=e.prev();return{next:function(){t.length&&v(t.index())},prev:function(){a.length&&v(a.index())}}}$(window).on("wheel",function(e){var t=e.originalEvent.deltaY,a=f();o||(0<t&&a.next(),t<0&&a.prev())}),$(window).on("keydown",function(e){var t=e.target.tagName.toLowerCase(),a="input"===t||"textarea"===t,n=f();if(!a)switch(e.keyCode){case 38:n.prev();break;case 40:n.next()}}),$("[data-scroll-to]").click(function(e){e.preventDefault();var t=$(e.currentTarget).attr("data-scroll-to"),a=$("[data-section-id=".concat(t,"]"));v(a.index())}),$(".wrapper").width()<768&&$("body").swipe({swipe:function(e,t){var a=f();"up"===t&&a.next(),"down"===t&&a.prev()}}),new function(e){var t=document.querySelector(e),s=t.querySelector("[data-list]").children;t.addEventListener("click",function(e){var t=e.target.closest("[data-trigger]");if(t){e.preventDefault();var a=t.dataset.trigger,n=t.closest("[data-item]");if(n.classList.contains(a))n.classList.remove(a);else{for(var o=0;o<s.length;o++)s[o].classList.remove(a);n.classList.add(a)}}})}("#acc-menu"),new function(e){var t=document.querySelector(e),l=t.querySelector("[data-player]"),d=t.querySelector('[data-control="mainPlay"]'),m=t.querySelector('[data-control="playPause"]'),u=t.querySelector('[data-control="playback"]'),v=t.querySelector('[data-control="playCurrent"]'),f=t.querySelector('[data-control="playbackBtn"]'),_=t.querySelector('[data-control="muted"]'),y=t.querySelector('[data-control="volumeback"]'),p=t.querySelector('[data-control="volumeCurrent"]'),g=t.querySelector('[data-control="volumebackBtn"]');t.addEventListener("click",function(e){var t,a,n,o,s=e.target,r="play",i="pause",c=l.paused;e.preventDefault(),s.closest("[data-control]")===m&&(c?(l.play(),s.classList.add(r),s.classList.remove(i),d.classList.add(r),d.classList.remove(i)):(l.pause(),s.classList.add(i),s.classList.remove(r),d.classList.add(i),d.classList.remove(r))),s.closest("[data-control]")===d&&(c?(l.play(),s.classList.add(r),s.classList.remove(i),m.classList.add(r),m.classList.remove(i)):(l.pause(),s.classList.add(i),s.classList.remove(r),m.classList.add(i),m.classList.remove(r))),s.closest("[data-control]")===_&&(l.muted?(l.muted=!1,s.classList.remove("muted")):(l.muted=!0,s.classList.add("muted"))),s.closest("[data-control]")===u&&(a=e.offsetX/(t=getComputedStyle(s).width).slice(0,t.length-2)*100,l.currentTime=l.duration/100*a,f.style.left="".concat(a,"%"),v.style.width="".concat(100-a,"%")),s.closest("[data-control]")===y&&(o=e.offsetX/(n=getComputedStyle(s).width).slice(0,n.length-2)*100,l.volume=o/100,g.style.left="".concat(o,"%"),p.style.width="".concat(100-o,"%")),l.addEventListener("play",function(){g.style.left="".concat(100*l.volume,"%"),p.style.width="".concat(100-100*l.volume,"%")}),l.addEventListener("timeupdate",function(){var e=l.currentTime/l.duration*100;f.style.left="".concat(e,"%"),v.style.width="".concat(100-e,"%")})})}("#player")}();